<!DOCTYPE html>
<html lang="en">
<head>
    <title>Apartment Cleaning Rotation</title>
    <style>
        /* A little bit of CSS to make it look nice */
        body { font-family: sans-serif; background-color: #f4f4f9; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .container { background-color: white; padding: 20px 40px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .assignment { border-left: 4px solid #5c67f2; padding-left: 15px; margin-bottom: 20px; }
        .person { font-weight: bold; font-size: 1.5em; }
        .task { font-size: 1.2em; color: #333; }
        .notes { color: #777; }
    </style>
</head>
<body>

    <div class="container">
        <h1>This Week's Cleaning Rotation ðŸ§¹</h1>
        
        <div id="assignment-A" class="assignment">
            <p class="person">Andreas</p>
            <p id="task-A" class="task">Loading task...</p>
            <p id="notes-A" class="notes"></p>
        </div>

        <div id="assignment-L" class="assignment">
            <p class="person">Luka</p>
            <p id="task-L" class="task">Loading task...</p>
            <p id="notes-L" class="notes"></p>
        </div>

        <div id="assignment-E" class="assignment">
            <p class="person">Emma</p>
            <p id="task-E" class="task">Loading task...</p>
            <p id="notes-E" class="notes"></p>
        </div>

    </div>

<script>
    // --- Section 1: Define our data (Unchanged) ---
    const people = ['A', 'L', 'E'];
    const tasks = [
        { 
            name: 'Floors', 
            notes: 'Vacuum, floor cleaning in whole apartment' 
        },
        { 
            name: 'Bathroom', 
            notes: 'Clean drain, mirror + shower' 
        },
        { 
            name: 'Livingroom + Kitchen', 
            notes: 'Clean surfaces, clean kitchen and general' 
        }
    ];

    // --- Section 2: The Core Logic (THE FIX IS HERE) ---
    
    // New helper function to get the ISO week number for any date.
    // This is a standard algorithm you can find online.
    function getISOWeek(date) {
        let d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
        // Set to nearest Thursday: current date + 4 - current day number
        d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
        // Get first day of year
        let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
        // Calculate full weeks to nearest Thursday
        let weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        return weekNo;
    }

    // --- Section 3: Assign and Display (Updated) ---
    function updateRota() {
        const today = new Date();
        // The key change is here! We now get the current week number.
        // Today, October 6, 2025, is in week 41.
        const week = getISOWeek(today);

        people.forEach((person, index) => {
            // The rotation logic remains the same, but now it's based on the correct week number.
            const taskIndex = (week + index) % tasks.length;
            const assignedTask = tasks[taskIndex];
            
            const taskElement = document.getElementById(`task-${person}`);
            const notesElement = document.getElementById(`notes-${person}`);
            
            taskElement.textContent = assignedTask.name;
            notesElement.textContent = assignedTask.notes;
        });
    }

    // --- Section 4: Run the code (Unchanged) ---
    updateRota();
</script>

</body>
</html>



